## 何为代理模式

> 为其他对象提供一种代理以控制对这个对象的访问呢。
>
> ——《设计模式》（Addison-Wesley，1994）

由以下几种呢代理：

* 远程代理（remote proxy）为位于不同地址空间或网络上的对象提供本地代表。
* 虚拟代理（virtual proxy）根据需要创建重型对象。
* 保护代理（protection proxy）根据各种访问权限控制对原对象的访问。
* 智能引用代理（smart-referennce proxy）通过对真正对象的引用进行计数来管理内存。也用于锁定真正对象，让其他对象不能对其进行修改。

通常，代理是一种替代或者占位，它控制对另一些对象的访问，而这些对象可能是远程对象。

创建的开销较大的对象，或者是对安全性有要求的对象。这里没有办法对这些代理作一一介绍，只重点讲解**虚拟代理**。
代理模式的思想是：使用一个基本上跟实体对象行为相同的代理。客户端可以“透明地”使用代理，即不必知悉所面对的只是一个代理而不是实体对象。当客户端请求某些创建的开销较大的功能时，代理将把请求转发给实体对象，准备好请求的功能并返回给客户端。客户端不知道幕后发生了什么。代理和实体对象同样拥有客户端要求的行为。以下的类图解释了这一思想：

![代理模式](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/031039.png)

当客户端向 `Proxy` 对象发送 `request` 消息时，`Proxy` 对象会把这个消息转发给 `Proxy` 对象中的 `RealSubject` 对象。`RealSubject` 会实施实际的操作以间接满足客户端的请求。



## 何时使用代理模式

在下列情形，自然会考虑使用这一模式。
* 需要一个远程代理，为位于不同地址空间或网络中的对象提供本地代表。
* 需要一个虚拟代理，来根据要求创建重型的对象本章稍后将在示例代码中实现这种代理。
* 需要一个保护代理，来根据不同访问权限控制对原对象的访问。
* 需要一个智能引用代理，通过对实体对象的引用进行计数来管理内存。也能用于锁定实体对象，让其他对象不能修改它。

