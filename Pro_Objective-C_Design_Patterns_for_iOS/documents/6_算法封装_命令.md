## 何为命令模式

> 将请求封装为一个对象，从而可用不同的请求对客户端进行参数化，对请求排队或记录请求日志，以及支持可撤销的操作。
>
> ——《设计模式》（Addison-Wesley，1994）

在面向对象设计中，把指令封装在各种命令对象中。命令对象可以被传递并且在指定时刻被不同的客户端复用。这一设计模式叫做命令（Commnad）模式。

命令对象封装了如何对目标执行指定的信息，因此客户端或调用者不必了解目标的任何细节，却仍可以对它执行任何已有的操作。通过把请求封装成对象，客户端可以把它参数化并置入队列或日志中，也能够支持可撤销的操作。命令对象将一个或多个动作绑定到特定的接收器。命令模式消除了作为对象的动作和执行它的接收器之间的绑定。

![命令模式](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/182703.png)

* `Client`（客户端）创建 `ConcreteCommand` 对象并设定其 `Receiver`（接收器）。
* `Invoker` 要求通用命令（实际上是 `ConcreteCommand`）实施请求。
* `Command` 是为 `Invoker` 所知的通用接口（协议）。
* `ConcreteCommand` 起 `Receiver` 和对它的操作 `action` 之间的中间人的作用。
* `Receiver` 可以是随着由 `Command`（`ConcreteCommand`）对象实施的相应请求，而执行实际操作的任何对象。



## 何时使用命令模式

在下列情形，自然会考虑使用这一模式。
* 想让应用程序支持撤销与恢复；
* 想用对象参数化一个动作以执行操作，并用不同命令对象来代替回调函数。
* 想要在不同时刻对请求进行指定、排列和执行。
* 想记录修改日志，这样在系统故障时，这些修改可在后来重做一遍。
* 想让系统支持事务（ transaction），事务封装了对数据的一系列修改事务可以建模为命令对象

