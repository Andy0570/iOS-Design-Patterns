## 观察者模式的定义

>对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。
>
>——《设计模式》（Addison-Wesley，1994）



观察者通过通知器把自己注册到特定的通知。当有通知的时候，观察者只从通知器得到它订阅的通知。它们的静态关系如图所示：

![观察者模式](https://blog-andy0570-1256077835.cos.ap-shanghai.myqcloud.com/site_Images/054447.png)

观察者模式是一种**发布-订阅模型**。`Observer`（观察者） 从 `Subject`（发布者）订阅通知。`ConcreteObserver` 实现抽象 `Observer` 并重载其 `update` 方法。一旦 `Subject` 的实例需要通知 `Observer` 任何新的变更，`Subject` 会发送 `update` 消息来通知存储在内部列表中所有注册的 `Observer`。在 `ConcreteObserver` 的 `update` 方法的实际实现中，`Subject` 的内部状态可被取得并在以后进行处理。

`Subject` 提供注册与取消注册的方法，任何实现了 `Observer` 协议并且想要处理 `update` 消息的对象，都可以进行注册或取消注册。当 `Subject` 的实例发生变更时，它会向自己发送 `notify` 消息。`notify` 方法里有个算法，定义了如何向已注册的观察者广播 `update` 消息。



## 何时使用观察者模式

在以下情形，自然会考虑使用这一模式：

* 有两个抽象类型相互依赖。将它们封装在各自的对象中，就可以对它们单独进行改变和复用。
* 对一个对象的改变需要同时改变其他对象。而不知道具体有多少对象有待改变。
* 一个对象必须通知其他对象，而它又不需要知道其他对象是什么。



## 实现观察者模式的两种方式

1. 通知（`NSNotification` 和 `NSNotificationCenter` 对象）
2. 键-值观察（KVO）













